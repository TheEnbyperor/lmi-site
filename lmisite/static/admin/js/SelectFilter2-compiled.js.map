{"version":3,"sources":["SelectFilter2.js"],"names":[],"mappings":"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","file":"SelectFilter2-compiled.js","sourcesContent":["/*global SelectBox, gettext, interpolate, quickElement, SelectFilter*/\n/*\nSelectFilter2 - Turns a multiple-select box into a filter interface.\n\nRequires jQuery, core.js, and SelectBox.js.\n*/\n(function($) {\n    'use strict';\n    function findForm(node) {\n        // returns the node of the form containing the given node\n        if (node.tagName.toLowerCase() !== 'form') {\n            return findForm(node.parentNode);\n        }\n        return node;\n    }\n\n    window.SelectFilter = {\n        init: function(field_id, field_name, is_stacked) {\n            if (field_id.match(/__prefix__/)) {\n                // Don't initialize on empty forms.\n                return;\n            }\n            var from_box = document.getElementById(field_id);\n            from_box.id += '_from'; // change its ID\n            from_box.className = 'filtered';\n\n            var ps = from_box.parentNode.getElementsByTagName('p');\n            for (var i = 0; i < ps.length; i++) {\n                if (ps[i].className.indexOf(\"info\") !== -1) {\n                    // Remove <p class=\"info\">, because it just gets in the way.\n                    from_box.parentNode.removeChild(ps[i]);\n                } else if (ps[i].className.indexOf(\"help\") !== -1) {\n                    // Move help text up to the top so it isn't below the select\n                    // boxes or wrapped off on the side to the right of the add\n                    // button:\n                    from_box.parentNode.insertBefore(ps[i], from_box.parentNode.firstChild);\n                }\n            }\n\n            // <div class=\"selector\"> or <div class=\"selector stacked\">\n            var selector_div = quickElement('div', from_box.parentNode);\n            selector_div.className = is_stacked ? 'selector stacked' : 'selector';\n\n            // <div class=\"selector-available\">\n            var selector_available = quickElement('div', selector_div);\n            selector_available.className = 'selector-available';\n            var title_available = quickElement('h2', selector_available, interpolate(gettext('Available %s') + ' ', [field_name]));\n            quickElement(\n                'span', title_available, '',\n                'class', 'help help-tooltip help-icon',\n                'title', interpolate(\n                    gettext(\n                        'This is the list of available %s. You may choose some by ' +\n                        'selecting them in the box below and then clicking the ' +\n                        '\"Choose\" arrow between the two boxes.'\n                    ),\n                    [field_name]\n                )\n            );\n\n            var filter_p = quickElement('p', selector_available, '', 'id', field_id + '_filter');\n            filter_p.className = 'selector-filter';\n\n            var search_filter_label = quickElement('label', filter_p, '', 'for', field_id + '_input');\n\n            quickElement(\n                'span', search_filter_label, '',\n                'class', 'help-tooltip search-label-icon',\n                'title', interpolate(gettext(\"Type into this box to filter down the list of available %s.\"), [field_name])\n            );\n\n            filter_p.appendChild(document.createTextNode(' '));\n\n            var filter_input = quickElement('input', filter_p, '', 'type', 'text', 'placeholder', gettext(\"Filter\"));\n            filter_input.id = field_id + '_input';\n\n            selector_available.appendChild(from_box);\n            var choose_all = quickElement('a', selector_available, gettext('Choose all'), 'title', interpolate(gettext('Click to choose all %s at once.'), [field_name]), 'href', '#', 'id', field_id + '_add_all_link');\n            choose_all.className = 'selector-chooseall';\n\n            // <ul class=\"selector-chooser\">\n            var selector_chooser = quickElement('ul', selector_div);\n            selector_chooser.className = 'selector-chooser';\n            var add_link = quickElement('a', quickElement('li', selector_chooser), gettext('Choose'), 'title', gettext('Choose'), 'href', '#', 'id', field_id + '_add_link');\n            add_link.className = 'selector-add';\n            var remove_link = quickElement('a', quickElement('li', selector_chooser), gettext('Remove'), 'title', gettext('Remove'), 'href', '#', 'id', field_id + '_remove_link');\n            remove_link.className = 'selector-remove';\n\n            // <div class=\"selector-chosen\">\n            var selector_chosen = quickElement('div', selector_div);\n            selector_chosen.className = 'selector-chosen';\n            var title_chosen = quickElement('h2', selector_chosen, interpolate(gettext('Chosen %s') + ' ', [field_name]));\n            quickElement(\n                'span', title_chosen, '',\n                'class', 'help help-tooltip help-icon',\n                'title', interpolate(\n                    gettext(\n                        'This is the list of chosen %s. You may remove some by ' +\n                        'selecting them in the box below and then clicking the ' +\n                        '\"Remove\" arrow between the two boxes.'\n                    ),\n                    [field_name]\n                )\n            );\n\n            var to_box = quickElement('select', selector_chosen, '', 'id', field_id + '_to', 'multiple', 'multiple', 'size', from_box.size, 'name', from_box.getAttribute('name'));\n            to_box.className = 'filtered';\n            var clear_all = quickElement('a', selector_chosen, gettext('Remove all'), 'title', interpolate(gettext('Click to remove all chosen %s at once.'), [field_name]), 'href', '#', 'id', field_id + '_remove_all_link');\n            clear_all.className = 'selector-clearall';\n\n            from_box.setAttribute('name', from_box.getAttribute('name') + '_old');\n\n            // Set up the JavaScript event handlers for the select box filter interface\n            var move_selection = function(e, elem, move_func, from, to) {\n                if (elem.className.indexOf('active') !== -1) {\n                    move_func(from, to);\n                    SelectFilter.refresh_icons(field_id);\n                }\n                e.preventDefault();\n            };\n            choose_all.addEventListener('click', function(e) {\n                move_selection(e, this, SelectBox.move_all, field_id + '_from', field_id + '_to');\n            });\n            add_link.addEventListener('click', function(e) {\n                move_selection(e, this, SelectBox.move, field_id + '_from', field_id + '_to');\n            });\n            remove_link.addEventListener('click', function(e) {\n                move_selection(e, this, SelectBox.move, field_id + '_to', field_id + '_from');\n            });\n            clear_all.addEventListener('click', function(e) {\n                move_selection(e, this, SelectBox.move_all, field_id + '_to', field_id + '_from');\n            });\n            filter_input.addEventListener('keypress', function(e) {\n                SelectFilter.filter_key_press(e, field_id);\n            });\n            filter_input.addEventListener('keyup', function(e) {\n                SelectFilter.filter_key_up(e, field_id);\n            });\n            filter_input.addEventListener('keydown', function(e) {\n                SelectFilter.filter_key_down(e, field_id);\n            });\n            selector_div.addEventListener('change', function(e) {\n                if (e.target.tagName === 'SELECT') {\n                    SelectFilter.refresh_icons(field_id);\n                }\n            });\n            selector_div.addEventListener('dblclick', function(e) {\n                if (e.target.tagName === 'OPTION') {\n                    if (e.target.closest('select').id === field_id + '_to') {\n                        SelectBox.move(field_id + '_to', field_id + '_from');\n                    } else {\n                        SelectBox.move(field_id + '_from', field_id + '_to');\n                    }\n                    SelectFilter.refresh_icons(field_id);\n                }\n            });\n            findForm(from_box).addEventListener('submit', function() {\n                SelectBox.select_all(field_id + '_to');\n            });\n            SelectBox.init(field_id + '_from');\n            SelectBox.init(field_id + '_to');\n            // Move selected from_box options to to_box\n            SelectBox.move(field_id + '_from', field_id + '_to');\n\n            if (!is_stacked) {\n                // In horizontal mode, give the same height to the two boxes.\n                var j_from_box = $(from_box);\n                var j_to_box = $(to_box);\n                var resize_filters = function() { j_to_box.height($(filter_p).outerHeight() + j_from_box.outerHeight()); };\n                if (j_from_box.outerHeight() > 0) {\n                    resize_filters(); // This fieldset is already open. Resize now.\n                } else {\n                    // This fieldset is probably collapsed. Wait for its 'show' event.\n                    j_to_box.closest('fieldset').one('show.fieldset', resize_filters);\n                }\n            }\n\n            // Initial icon refresh\n            SelectFilter.refresh_icons(field_id);\n        },\n        any_selected: function(field) {\n            var any_selected = false;\n            try {\n                // Temporarily add the required attribute and check validity.\n                // This is much faster in WebKit browsers than the fallback.\n                field.attr('required', 'required');\n                any_selected = field.is(':valid');\n                field.removeAttr('required');\n            } catch (e) {\n                // Browsers that don't support :valid (IE < 10)\n                any_selected = field.find('option:selected').length > 0;\n            }\n            return any_selected;\n        },\n        refresh_icons: function(field_id) {\n            var from = $('#' + field_id + '_from');\n            var to = $('#' + field_id + '_to');\n            // Active if at least one item is selected\n            $('#' + field_id + '_add_link').toggleClass('active', SelectFilter.any_selected(from));\n            $('#' + field_id + '_remove_link').toggleClass('active', SelectFilter.any_selected(to));\n            // Active if the corresponding box isn't empty\n            $('#' + field_id + '_add_all_link').toggleClass('active', from.find('option').length > 0);\n            $('#' + field_id + '_remove_all_link').toggleClass('active', to.find('option').length > 0);\n        },\n        filter_key_press: function(event, field_id) {\n            var from = document.getElementById(field_id + '_from');\n            // don't submit form if user pressed Enter\n            if ((event.which && event.which === 13) || (event.keyCode && event.keyCode === 13)) {\n                from.selectedIndex = 0;\n                SelectBox.move(field_id + '_from', field_id + '_to');\n                from.selectedIndex = 0;\n                event.preventDefault();\n                return false;\n            }\n        },\n        filter_key_up: function(event, field_id) {\n            var from = document.getElementById(field_id + '_from');\n            var temp = from.selectedIndex;\n            SelectBox.filter(field_id + '_from', document.getElementById(field_id + '_input').value);\n            from.selectedIndex = temp;\n            return true;\n        },\n        filter_key_down: function(event, field_id) {\n            var from = document.getElementById(field_id + '_from');\n            // right arrow -- move across\n            if ((event.which && event.which === 39) || (event.keyCode && event.keyCode === 39)) {\n                var old_index = from.selectedIndex;\n                SelectBox.move(field_id + '_from', field_id + '_to');\n                from.selectedIndex = (old_index === from.length) ? from.length - 1 : old_index;\n                return false;\n            }\n            // down arrow -- wrap around\n            if ((event.which && event.which === 40) || (event.keyCode && event.keyCode === 40)) {\n                from.selectedIndex = (from.length === from.selectedIndex + 1) ? 0 : from.selectedIndex + 1;\n            }\n            // up arrow -- wrap around\n            if ((event.which && event.which === 38) || (event.keyCode && event.keyCode === 38)) {\n                from.selectedIndex = (from.selectedIndex === 0) ? from.length - 1 : from.selectedIndex - 1;\n            }\n            return true;\n        }\n    };\n\n    window.addEventListener('load', function(e) {\n        $('select.selectfilter, select.selectfilterstacked').each(function() {\n            var $el = $(this),\n                data = $el.data();\n            SelectFilter.init($el.attr('id'), data.fieldName, parseInt(data.isStacked, 10));\n        });\n    });\n\n})(django.jQuery);\n"]}