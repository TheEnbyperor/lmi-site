'use strict';(function(a){'use strict';function b(a){return'form'===a.tagName.toLowerCase()?a:b(a.parentNode)}window.SelectFilter={init:function init(c,d,e){if(!c.match(/__prefix__/)){var f=document.getElementById(c);f.id+='_from',f.className='filtered';for(var g=f.parentNode.getElementsByTagName('p'),h=0;h<g.length;h++)-1===g[h].className.indexOf('info')?-1!==g[h].className.indexOf('help')&&f.parentNode.insertBefore(g[h],f.parentNode.firstChild):f.parentNode.removeChild(g[h]);var i=quickElement('div',f.parentNode);i.className=e?'selector stacked':'selector';var j=quickElement('div',i);j.className='selector-available';var k=quickElement('h2',j,interpolate(gettext('Available %s')+' ',[d]));quickElement('span',k,'','class','help help-tooltip help-icon','title',interpolate(gettext('This is the list of available %s. You may choose some by selecting them in the box below and then clicking the "Choose" arrow between the two boxes.'),[d]));var l=quickElement('p',j,'','id',c+'_filter');l.className='selector-filter';var m=quickElement('label',l,'','for',c+'_input');quickElement('span',m,'','class','help-tooltip search-label-icon','title',interpolate(gettext('Type into this box to filter down the list of available %s.'),[d])),l.appendChild(document.createTextNode(' '));var n=quickElement('input',l,'','type','text','placeholder',gettext('Filter'));n.id=c+'_input',j.appendChild(f);var o=quickElement('a',j,gettext('Choose all'),'title',interpolate(gettext('Click to choose all %s at once.'),[d]),'href','#','id',c+'_add_all_link');o.className='selector-chooseall';var p=quickElement('ul',i);p.className='selector-chooser';var q=quickElement('a',quickElement('li',p),gettext('Choose'),'title',gettext('Choose'),'href','#','id',c+'_add_link');q.className='selector-add';var r=quickElement('a',quickElement('li',p),gettext('Remove'),'title',gettext('Remove'),'href','#','id',c+'_remove_link');r.className='selector-remove';var s=quickElement('div',i);s.className='selector-chosen';var t=quickElement('h2',s,interpolate(gettext('Chosen %s')+' ',[d]));quickElement('span',t,'','class','help help-tooltip help-icon','title',interpolate(gettext('This is the list of chosen %s. You may remove some by selecting them in the box below and then clicking the "Remove" arrow between the two boxes.'),[d]));var u=quickElement('select',s,'','id',c+'_to','multiple','multiple','size',f.size,'name',f.getAttribute('name'));u.className='filtered';var v=quickElement('a',s,gettext('Remove all'),'title',interpolate(gettext('Click to remove all chosen %s at once.'),[d]),'href','#','id',c+'_remove_all_link');v.className='selector-clearall',f.setAttribute('name',f.getAttribute('name')+'_old');var w=function(a,b,d,e,f){-1!==b.className.indexOf('active')&&(d(e,f),SelectFilter.refresh_icons(c)),a.preventDefault()};if(o.addEventListener('click',function(a){w(a,this,SelectBox.move_all,c+'_from',c+'_to')}),q.addEventListener('click',function(a){w(a,this,SelectBox.move,c+'_from',c+'_to')}),r.addEventListener('click',function(a){w(a,this,SelectBox.move,c+'_to',c+'_from')}),v.addEventListener('click',function(a){w(a,this,SelectBox.move_all,c+'_to',c+'_from')}),n.addEventListener('keypress',function(a){SelectFilter.filter_key_press(a,c)}),n.addEventListener('keyup',function(a){SelectFilter.filter_key_up(a,c)}),n.addEventListener('keydown',function(a){SelectFilter.filter_key_down(a,c)}),i.addEventListener('change',function(a){'SELECT'===a.target.tagName&&SelectFilter.refresh_icons(c)}),i.addEventListener('dblclick',function(a){'OPTION'===a.target.tagName&&(a.target.closest('select').id===c+'_to'?SelectBox.move(c+'_to',c+'_from'):SelectBox.move(c+'_from',c+'_to'),SelectFilter.refresh_icons(c))}),b(f).addEventListener('submit',function(){SelectBox.select_all(c+'_to')}),SelectBox.init(c+'_from'),SelectBox.init(c+'_to'),SelectBox.move(c+'_from',c+'_to'),!e){var x=a(f),y=a(u),z=function(){y.height(a(l).outerHeight()+x.outerHeight())};0<x.outerHeight()?z():y.closest('fieldset').one('show.fieldset',z)}SelectFilter.refresh_icons(c)}},any_selected:function(a){var b=!1;try{a.attr('required','required'),b=a.is(':valid'),a.removeAttr('required')}catch(c){b=0<a.find('option:selected').length}return b},refresh_icons:function refresh_icons(b){var c=a('#'+b+'_from'),d=a('#'+b+'_to');a('#'+b+'_add_link').toggleClass('active',SelectFilter.any_selected(c)),a('#'+b+'_remove_link').toggleClass('active',SelectFilter.any_selected(d)),a('#'+b+'_add_all_link').toggleClass('active',0<c.find('option').length),a('#'+b+'_remove_all_link').toggleClass('active',0<d.find('option').length)},filter_key_press:function filter_key_press(a,b){var c=document.getElementById(b+'_from');if(a.which&&13===a.which||a.keyCode&&13===a.keyCode)return c.selectedIndex=0,SelectBox.move(b+'_from',b+'_to'),c.selectedIndex=0,a.preventDefault(),!1},filter_key_up:function filter_key_up(a,b){var c=document.getElementById(b+'_from'),d=c.selectedIndex;return SelectBox.filter(b+'_from',document.getElementById(b+'_input').value),c.selectedIndex=d,!0},filter_key_down:function filter_key_down(a,b){var c=document.getElementById(b+'_from');if(a.which&&39===a.which||a.keyCode&&39===a.keyCode){var d=c.selectedIndex;return SelectBox.move(b+'_from',b+'_to'),c.selectedIndex=d===c.length?c.length-1:d,!1}return(a.which&&40===a.which||a.keyCode&&40===a.keyCode)&&(c.selectedIndex=c.length===c.selectedIndex+1?0:c.selectedIndex+1),(a.which&&38===a.which||a.keyCode&&38===a.keyCode)&&(c.selectedIndex=0===c.selectedIndex?c.length-1:c.selectedIndex-1),!0}},window.addEventListener('load',function(){a('select.selectfilter, select.selectfilterstacked').each(function(){var b=a(this),c=b.data();SelectFilter.init(b.attr('id'),c.fieldName,parseInt(c.isStacked,10))})})})(django.jQuery);

//# sourceMappingURL=SelectFilter2-compiled.js.map