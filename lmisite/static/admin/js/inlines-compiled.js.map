{"version":3,"sources":["inlines.js"],"names":[],"mappings":"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","file":"inlines-compiled.js","sourcesContent":["/*global DateTimeShortcuts, SelectFilter*/\n/**\n * Django admin inlines\n *\n * Based on jQuery Formset 1.1\n * @author Stanislaus Madueke (stan DOT madueke AT gmail DOT com)\n * @requires jQuery 1.2.6 or later\n *\n * Copyright (c) 2009, Stanislaus Madueke\n * All rights reserved.\n *\n * Spiced up with Code from Zain Memon's GSoC project 2009\n * and modified for Django by Jannis Leidel, Travis Swicegood and Julien Phalip.\n *\n * Licensed under the New BSD License\n * See: http://www.opensource.org/licenses/bsd-license.php\n */\n(function($) {\n    'use strict';\n    $.fn.formset = function(opts) {\n        var options = $.extend({}, $.fn.formset.defaults, opts);\n        var $this = $(this);\n        var $parent = $this.parent();\n        var updateElementIndex = function(el, prefix, ndx) {\n            var id_regex = new RegExp(\"(\" + prefix + \"-(\\\\d+|__prefix__))\");\n            var replacement = prefix + \"-\" + ndx;\n            if ($(el).prop(\"for\")) {\n                $(el).prop(\"for\", $(el).prop(\"for\").replace(id_regex, replacement));\n            }\n            if (el.id) {\n                el.id = el.id.replace(id_regex, replacement);\n            }\n            if (el.name) {\n                el.name = el.name.replace(id_regex, replacement);\n            }\n        };\n        var totalForms = $(\"#id_\" + options.prefix + \"-TOTAL_FORMS\").prop(\"autocomplete\", \"off\");\n        var nextIndex = parseInt(totalForms.val(), 10);\n        var maxForms = $(\"#id_\" + options.prefix + \"-MAX_NUM_FORMS\").prop(\"autocomplete\", \"off\");\n        // only show the add button if we are allowed to add more items,\n        // note that max_num = None translates to a blank string.\n        var showAddButton = maxForms.val() === '' || (maxForms.val() - totalForms.val()) > 0;\n        $this.each(function(i) {\n            $(this).not(\".\" + options.emptyCssClass).addClass(options.formCssClass);\n        });\n        if ($this.length && showAddButton) {\n            var addButton = options.addButton;\n            if (addButton === null) {\n                if ($this.prop(\"tagName\") === \"TR\") {\n                    // If forms are laid out as table rows, insert the\n                    // \"add\" button in a new table row:\n                    var numCols = this.eq(-1).children().length;\n                    $parent.append('<tr class=\"' + options.addCssClass + '\"><td colspan=\"' + numCols + '\"><a href=\"#\">' + options.addText + \"</a></tr>\");\n                    addButton = $parent.find(\"tr:last a\");\n                } else {\n                    // Otherwise, insert it immediately after the last form:\n                    $this.filter(\":last\").after('<div class=\"' + options.addCssClass + '\"><a href=\"#\">' + options.addText + \"</a></div>\");\n                    addButton = $this.filter(\":last\").next().find(\"a\");\n                }\n            }\n            addButton.click(function(e) {\n                e.preventDefault();\n                var template = $(\"#\" + options.prefix + \"-empty\");\n                var row = template.clone(true);\n                row.removeClass(options.emptyCssClass)\n                .addClass(options.formCssClass)\n                .attr(\"id\", options.prefix + \"-\" + nextIndex);\n                if (row.is(\"tr\")) {\n                    // If the forms are laid out in table rows, insert\n                    // the remove button into the last table cell:\n                    row.children(\":last\").append('<div><a class=\"' + options.deleteCssClass + '\" href=\"#\">' + options.deleteText + \"</a></div>\");\n                } else if (row.is(\"ul\") || row.is(\"ol\")) {\n                    // If they're laid out as an ordered/unordered list,\n                    // insert an <li> after the last list item:\n                    row.append('<li><a class=\"' + options.deleteCssClass + '\" href=\"#\">' + options.deleteText + \"</a></li>\");\n                } else {\n                    // Otherwise, just insert the remove button as the\n                    // last child element of the form's container:\n                    row.children(\":first\").append('<span><a class=\"' + options.deleteCssClass + '\" href=\"#\">' + options.deleteText + \"</a></span>\");\n                }\n                row.find(\"*\").each(function() {\n                    updateElementIndex(this, options.prefix, totalForms.val());\n                });\n                // Insert the new form when it has been fully edited\n                row.insertBefore($(template));\n                // Update number of total forms\n                $(totalForms).val(parseInt(totalForms.val(), 10) + 1);\n                nextIndex += 1;\n                // Hide add button in case we've hit the max, except we want to add infinitely\n                if ((maxForms.val() !== '') && (maxForms.val() - totalForms.val()) <= 0) {\n                    addButton.parent().hide();\n                }\n                // The delete button of each row triggers a bunch of other things\n                row.find(\"a.\" + options.deleteCssClass).click(function(e1) {\n                    e1.preventDefault();\n                    // Remove the parent form containing this button:\n                    row.remove();\n                    nextIndex -= 1;\n                    // If a post-delete callback was provided, call it with the deleted form:\n                    if (options.removed) {\n                        options.removed(row);\n                    }\n                    $(document).trigger('formset:removed', [row, options.prefix]);\n                    // Update the TOTAL_FORMS form count.\n                    var forms = $(\".\" + options.formCssClass);\n                    $(\"#id_\" + options.prefix + \"-TOTAL_FORMS\").val(forms.length);\n                    // Show add button again once we drop below max\n                    if ((maxForms.val() === '') || (maxForms.val() - forms.length) > 0) {\n                        addButton.parent().show();\n                    }\n                    // Also, update names and ids for all remaining form controls\n                    // so they remain in sequence:\n                    var i, formCount;\n                    var updateElementCallback = function() {\n                        updateElementIndex(this, options.prefix, i);\n                    };\n                    for (i = 0, formCount = forms.length; i < formCount; i++) {\n                        updateElementIndex($(forms).get(i), options.prefix, i);\n                        $(forms.get(i)).find(\"*\").each(updateElementCallback);\n                    }\n                });\n                // If a post-add callback was supplied, call it with the added form:\n                if (options.added) {\n                    options.added(row);\n                }\n                $(document).trigger('formset:added', [row, options.prefix]);\n            });\n        }\n        return this;\n    };\n\n    /* Setup plugin defaults */\n    $.fn.formset.defaults = {\n        prefix: \"form\",          // The form prefix for your django formset\n        addText: \"add another\",      // Text for the add link\n        deleteText: \"remove\",      // Text for the delete link\n        addCssClass: \"add-row\",      // CSS class applied to the add link\n        deleteCssClass: \"delete-row\",  // CSS class applied to the delete link\n        emptyCssClass: \"empty-row\",    // CSS class applied to the empty row\n        formCssClass: \"dynamic-form\",  // CSS class applied to each form in a formset\n        added: null,          // Function called each time a new form is added\n        removed: null,          // Function called each time a form is deleted\n        addButton: null       // Existing add button to use\n    };\n\n\n    // Tabular inlines ---------------------------------------------------------\n    $.fn.tabularFormset = function(options) {\n        var $rows = $(this);\n        var alternatingRows = function(row) {\n            $($rows.selector).not(\".add-row\").removeClass(\"row1 row2\")\n            .filter(\":even\").addClass(\"row1\").end()\n            .filter(\":odd\").addClass(\"row2\");\n        };\n\n        var reinitDateTimeShortCuts = function() {\n            // Reinitialize the calendar and clock widgets by force\n            if (typeof DateTimeShortcuts !== \"undefined\") {\n                $(\".datetimeshortcuts\").remove();\n                DateTimeShortcuts.init();\n            }\n        };\n\n        var updateSelectFilter = function() {\n            // If any SelectFilter widgets are a part of the new form,\n            // instantiate a new SelectFilter instance for it.\n            if (typeof SelectFilter !== 'undefined') {\n                $('.selectfilter').each(function(index, value) {\n                    var namearr = value.name.split('-');\n                    SelectFilter.init(value.id, namearr[namearr.length - 1], false);\n                });\n                $('.selectfilterstacked').each(function(index, value) {\n                    var namearr = value.name.split('-');\n                    SelectFilter.init(value.id, namearr[namearr.length - 1], true);\n                });\n            }\n        };\n\n        var initPrepopulatedFields = function(row) {\n            row.find('.prepopulated_field').each(function() {\n                var field = $(this),\n                    input = field.find('input, select, textarea'),\n                    dependency_list = input.data('dependency_list') || [],\n                    dependencies = [];\n                $.each(dependency_list, function(i, field_name) {\n                    dependencies.push('#' + row.find('.field-' + field_name).find('input, select, textarea').attr('id'));\n                });\n                if (dependencies.length) {\n                    input.prepopulate(dependencies, input.attr('maxlength'));\n                }\n            });\n        };\n\n        $rows.formset({\n            prefix: options.prefix,\n            addText: options.addText,\n            formCssClass: \"dynamic-\" + options.prefix,\n            deleteCssClass: \"inline-deletelink\",\n            deleteText: options.deleteText,\n            emptyCssClass: \"empty-form\",\n            removed: alternatingRows,\n            added: function(row) {\n                initPrepopulatedFields(row);\n                reinitDateTimeShortCuts();\n                updateSelectFilter();\n                alternatingRows(row);\n            },\n            addButton: options.addButton\n        });\n\n        return $rows;\n    };\n\n    // Stacked inlines ---------------------------------------------------------\n    $.fn.stackedFormset = function(options) {\n        var $rows = $(this);\n        var updateInlineLabel = function(row) {\n            $($rows.selector).find(\".inline_label\").each(function(i) {\n                var count = i + 1;\n                $(this).html($(this).html().replace(/(#\\d+)/g, \"#\" + count));\n            });\n        };\n\n        var reinitDateTimeShortCuts = function() {\n            // Reinitialize the calendar and clock widgets by force, yuck.\n            if (typeof DateTimeShortcuts !== \"undefined\") {\n                $(\".datetimeshortcuts\").remove();\n                DateTimeShortcuts.init();\n            }\n        };\n\n        var updateSelectFilter = function() {\n            // If any SelectFilter widgets were added, instantiate a new instance.\n            if (typeof SelectFilter !== \"undefined\") {\n                $(\".selectfilter\").each(function(index, value) {\n                    var namearr = value.name.split('-');\n                    SelectFilter.init(value.id, namearr[namearr.length - 1], false);\n                });\n                $(\".selectfilterstacked\").each(function(index, value) {\n                    var namearr = value.name.split('-');\n                    SelectFilter.init(value.id, namearr[namearr.length - 1], true);\n                });\n            }\n        };\n\n        var initPrepopulatedFields = function(row) {\n            row.find('.prepopulated_field').each(function() {\n                var field = $(this),\n                    input = field.find('input, select, textarea'),\n                    dependency_list = input.data('dependency_list') || [],\n                    dependencies = [];\n                $.each(dependency_list, function(i, field_name) {\n                    dependencies.push('#' + row.find('.form-row .field-' + field_name).find('input, select, textarea').attr('id'));\n                });\n                if (dependencies.length) {\n                    input.prepopulate(dependencies, input.attr('maxlength'));\n                }\n            });\n        };\n\n        $rows.formset({\n            prefix: options.prefix,\n            addText: options.addText,\n            formCssClass: \"dynamic-\" + options.prefix,\n            deleteCssClass: \"inline-deletelink\",\n            deleteText: options.deleteText,\n            emptyCssClass: \"empty-form\",\n            removed: updateInlineLabel,\n            added: function(row) {\n                initPrepopulatedFields(row);\n                reinitDateTimeShortCuts();\n                updateSelectFilter();\n                updateInlineLabel(row);\n            },\n            addButton: options.addButton\n        });\n\n        return $rows;\n    };\n\n    $(document).ready(function() {\n        $(\".js-inline-admin-formset\").each(function() {\n            var data = $(this).data(),\n                inlineOptions = data.inlineFormset;\n            switch(data.inlineType) {\n            case \"stacked\":\n                $(inlineOptions.name + \"-group .inline-related\").stackedFormset(inlineOptions.options);\n                break;\n            case \"tabular\":\n                $(inlineOptions.name + \"-group .tabular.inline-related tbody:first > tr\").tabularFormset(inlineOptions.options);\n                break;\n            }\n        });\n    });\n})(django.jQuery);\n"]}